<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

<f:metadata>
	<f:viewParam name="clienteId" value="#{mensalidadeController.clienteId}"/>
	<f:event listener="#{mensalidadeController.load()}" type="preRenderView"/>
</f:metadata>
<ui:composition template="/layout.xhtml">
	<ui:define name="title">#{bundle.contrato}</ui:define>
	<ui:define name="content">

		<div class="panel panel-primary">
			<div class="panel-heading">CONTRATO</div>
			<div class="panel-body">
				<form jsf:id="form" class="form-horizontal">

					<label jsf:for="cliente" class="control-label">#{bundle.cliente}</label>
					<input jsf:id="cliente" type="text" class="form-control"
						jsf:value="#{mensalidadeController.mensalidade.cliente.nome}" readonly="readonly"
						required="required" />

					<label jsf:for="valor" class="control-label">#{bundle.valor}</label>
					<input jsf:id="valor" type="number" step="any" class="form-control"
						jsf:value="#{mensalidadeController.mensalidade.valor}"
						required="required" />

					<label jsf:for="vencimento" class="control-label">#{bundle.vencimento}</label>
			        <input jsf:id="vencimento" type="date" required="required"
			            jsf:value="#{mensalidadeController.mensalidade.dataVencimento}" class="form-control">
			            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT-03:00"/>
			        </input>

					<label jsf:for="status" class="control-label">#{bundle.status}</label>
					<h:selectOneMenu id="status" value="#{mensalidadeController.mensalidade.status}"
						styleClass="m5 btn-primary btn-lg" required="true">
						<f:selectItem itemLabel="EM ABERTO" itemValue="#{mensalidadeController.mensalidade.NAO_PAGA}" />
						<f:selectItem itemLabel="PAGA" itemValue="#{mensalidadeController.mensalidade.PAGA}" />
					</h:selectOneMenu>


					<div class="modal-footer">
		              <button jsf:id="btSalvar" jsf:actionListener="#{mensalidadeController.salvar()}"
		                class="btn btn-primary" type="submit">
		                <span class="glyphicon glyphicon-floppy-save" /> #{bundle.salvar}
		              </button>
		              <button jsf:id="btVoltar" jsf:outcome="edit" style="margin-left: 5px;"
		                class="btn btn-primary">
		                <span class="glyphicon glyphicon-circle-arrow-left" /> #{bundle.back}
						<f:param value="#{mensalidadeController.cliente.id}" name="id"></f:param>
		              </button>
		            </div>
					
				</form>
				
				<form jsf:id="formMensalidades">
					<h:dataTable value="#{mensalidadeController.cliente.mensalidades}"
						var="m" styleClass="table table-striped table-bordered"
						headerClass="tableColumnsHeader">
						
						<h:column>
							<f:facet name="header">#{bundle.vencimento}</f:facet>
							#{m.dataVencimento}
						</h:column>
						
						<h:column>
							<f:facet name="header">#{bundle.valor}</f:facet>
							#{m.valor}
						</h:column>
						
						<h:column>
							<f:facet name="header">#{bundle.status}</f:facet>
							#{m.statusFormatado}
						</h:column>
						<h:column>
							<f:facet name="header">#{bundle.actions}</f:facet>
								<button jsf:id="btnEdit" class="btn btn-primary link-group">
									<span class="glyphicon glyphicon-edit" />
									<f:setPropertyActionListener target="#{mensalidadeController.mensalidade}" value="#{m}"/>
								</button>
						</h:column>
					</h:dataTable>
				</form>

			</div>
		</div>
	</ui:define>
</ui:composition>
</html>