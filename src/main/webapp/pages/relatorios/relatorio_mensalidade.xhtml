<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf">
	<ui:composition template="/layout.xhtml">
	<ui:define name="title">#{bundle.relatorio}</ui:define>
	<ui:define name="subtitle">#{bundle.mensalidades}</ui:define>
	<ui:define name="content">
		<div class="panel-body">
			<form jsf:id="formPesquisa" class="form-horizontal">
			
				<div class="checkbox">
                    <label>
                        <input jsf:id="dataOcorrencia" type="checkbox" jsf:value="#{mensalidadeRelatorioController.pesquisarPorDataOcorrencia}"/>  Buscar por data da ocorrÃªncia
                    </label>
                </div>
				<label jsf:for="dataInicio" class="control-label">#{bundle.dataInicio}</label>
				<input jsf:id="dataInicio" jsf:value="#{mensalidadeRelatorioController.dataInicio}" type="date" class="form-control" required="required">
					<f:convertDateTime pattern="yyyy-MM-dd"  timeZone="GMT-03:00"/>
				</input>

				<label jsf:for="dataFim" class="control-label">#{bundle.dataFim}</label>
				<input jsf:id="dataFim" jsf:value="#{mensalidadeRelatorioController.dataFim}" type="date" class="form-control" required="required">
					<f:convertDateTime pattern="yyyy-MM-dd"  timeZone="GMT-03:00"/>
				</input>
				<label jsf:for="status" class="control-label">#{bundle.status}</label>
				<h:selectOneMenu id="status" value="#{mensalidadeRelatorioController.status}"
					styleClass="form-control" required="true">
					<f:selectItem itemLabel="TODOS" itemValue="-1" />
					<f:selectItem itemLabel="EM ABERTO" itemValue="0" />
					<f:selectItem itemLabel="PAGA" itemValue="1" />
				</h:selectOneMenu>

		    	<div class="modal-footer">
	              <button jsf:id="btConsultar" jsf:actionListener="#{mensalidadeRelatorioController.consultar()}"
	                class="btn btn-primary" type="submit">
	                <span class="glyphicon glyphicon-search" /> #{bundle.search}
	              </button>
	            </div>
			</form>
		</div>
		<div class="panel-body">
			<div class="table-responsive">
				<h:dataTable value="#{mensalidadeRelatorioController.listMensalidades}"
					var="m" styleClass="table table-hover"
					headerClass="tableColumnsHeader">
					
					<h:column>
						<f:facet name="header">#{bundle.cliente}</f:facet>
						#{m.cliente.nome}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.valor}</f:facet>
						#{m.valorFormatada}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.valorPago}</f:facet>
						#{m.valorPagoFormatada}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.desconto}</f:facet>
						#{m.desconto}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.tarifa}</f:facet>
						#{m.tarifaFormatada}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.vencimento}</f:facet>
						#{m.dataVencimento}
					</h:column>
					<h:column>
						<f:facet name="header">#{bundle.dataOcorrencia}</f:facet>
						#{m.dataOcorrencia}
					</h:column>
					
					<f:facet name="footer">
						<tr>
							<th>Total</th>
							<th>#{mensalidadeRelatorioController.valorTotal}</th>
							<th>#{mensalidadeRelatorioController.valorPagoTotal}</th>
							<th>#{mensalidadeRelatorioController.descontoTotal}</th>
							<th>#{mensalidadeRelatorioController.tarifaTotal}</th>
							<th colspan="3"></th>
						</tr>
					</f:facet>
					
				</h:dataTable>
			</div>
		</div>
	</ui:define>
	</ui:composition>
</html>