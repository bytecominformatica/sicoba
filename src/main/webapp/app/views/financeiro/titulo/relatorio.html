<h1 class="page-header">
    <a ng-href="#/cliente/{{cliente.id}}">
        <i class="fa fa-arrow-circle-left"></i>
    </a>
    Relatorio
    <small>Titulos</small>
</h1>

<div class="col-lg-12">

    <form name="form" class="form-horizontal" ng-submit="form.$valid && consultar(params)" novalidate>
        <div class="col-lg-3"
             ng-class="{'has-error': (form.inicio.$invalid && (form.$submitted || form.inicio.$touched))}">
            <label>Início</label>
            <div class="input-group">
                <input name="inicio" type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy"
                       ng-model="params.inicio"
                       is-open="status.opened" close-text="Close" required/>
                <i class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="status.opened = !status.opened">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </button>
                </i>
            </div>
            <p class="help-block" ng-show="form.$submitted || form.inicio.$touched">
                <i ng-show="form.inicio.$error.required">A partir de qual data deseja consultar?</i>
            </p>
        </div>

        <div class="col-lg-3"
             ng-class="{'has-error': (form.fim.$invalid && (form.$submitted || form.fim.$touched))}">
            <label>Fim</label>
            <div class="input-group">
                <input name="fim" type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy"
                       ng-model="params.fim"
                       is-open="status.opened2" close-text="Close" required/>
                <i class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="status.opened2 = !status.opened2">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </button>
                </i>
            </div>
            <p class="help-block" ng-show="form.$submitted || form.fim.$touched">
                <i ng-show="form.fim.$error.required">Até que data deseja consultar?</i>
            </p>
        </div>


        <div class="col-lg-2"
             ng-class="{'has-error': (form.status.$invalid && (form.$submitted || form.status.$touched))}">
            <label>Status</label>
            <select name="status" ng-model="params.status" class="form-control"
                    ng-options="status.value as status.descricao for status in statusList">
                <option value="">Todos</option>
            </select>
        </div>

        <div class="col-lg-2"
             ng-class="{'has-error': (form.porDataOcorrencia.$invalid && (form.$submitted || form.porDataOcorrencia.$touched))}">
            <label>Buscar por</label>
            <select name="porDataOcorrencia" ng-model="params.porDataOcorrencia" class="form-control"
                    ng-options="it.value as it.descricao for it in [{value:true, descricao:'Data ocorrencia'}, {value:false, descricao:'Data vencimento'}]">
            </select>
        </div>

        <div class="col-lg-2">
            <button type="submit" class="btn btn-primary">
                Consultar
                <i class="fa fa-search"></i>
            </button>
        </div>

    </form>
</div>

<div class="col-lg-12" style="padding-top: 20px">

    <table class="table table-striped table-bordered table-hover dataTable no-footer">
        <thead>
        <tr>
            <th>Id</th>
            <th>Cliente</th>
            <th>Valor</th>
            <th>Valor Pago</th>
            <th>Desconto</th>
            <th>Tarifa</th>
            <th>Vencimento</th>
            <th>Ocorrencia</th>
            <th>Boleto</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="it in titulos track by it.id">
            <td>{{it.id}}</td>
            <td>{{it.cliente.nome}}</td>
            <td>{{it.valor | currency}}</td>
            <td>{{it.valorPago | currency}}</td>
            <td>{{it.desconto | currency}}</td>
            <td>{{it.tarifa | currency}}</td>
            <td>{{it.dataVencimento | date:'dd/MM/yyyy'}}</td>
            <td>{{it.dataOcorrencia | date:'dd/MM/yyyy'}}</td>
            <td>{{it.numeroBoleto}}</td>
            <td>
                <i class="label" ng-class="getStatusClass(it.status)">
                    {{it.status}}
                </i>
            </td>
        </tr>
        </tbody>
    </table>
</div>
